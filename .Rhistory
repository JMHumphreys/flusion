legend.title = element_text(size=16, face="bold"),
axis.title.x =  element_text(size=16, face="bold"),
axis.title.y = element_text(size=16, face="bold"),
axis.text.x =  element_text(size=14, face="bold", angle=60, hjust=1),
axis.text.y = element_text(size=12, face="bold"),
plot.title = element_text(size=22, face="bold"))
model_out <- rw.mod$summary.fitted.values[,c(3:7)]
names(model_out) <- c("q0.05", "q0.25", "q0.5", "q0.75", "q0.95")
comb_data_pred <- cbind(comb_data, model_out)
rw_natl <- comb_data_pred %>%
filter(is.na(Y) == TRUE) %>%
group_by(date) %>%
summarise(Q0.05 = sum(q0.05),
Q0.25 = sum(q0.25),
Q0.5 = sum(q0.5),
Q0.75 = sum(q0.75),
Q0.95 = sum(q0.95),
truth = sum(truth, na.rm=T))
ggplot(rw_natl, aes(date, truth)) +
geom_bar(stat="identity", fill="tan") +
geom_ribbon(aes(ymin=Q0.05, ymax=Q0.95),fill="steelblue", alpha = 0.3) +
geom_ribbon(aes(ymin=Q0.25, ymax=Q0.75),fill="steelblue", alpha = 0.5) +
geom_line(data=rw_natl,
aes(date, Q0.5)) +
scale_x_date(date_breaks = "1 month", date_labels = "%b-%Y") +
theme_classic() +
ylab("Hospitalizations") +
xlab(" ") +
theme_minimal() +
theme(plot.margin = unit(c(2,0.1,2,0.1), "cm"),
panel.grid.minor = element_line(color = "gray90", linewidth = 0.25, linetype = 1),
panel.grid.major = element_line(color = "gray60", linewidth = 0.5, linetype = 1),
panel.background = element_blank(),
plot.background = element_blank(),
strip.text = element_text(size=14, face="bold"),
strip.background = element_blank(),
legend.position="none",
legend.text = element_text(size=12, face="bold"),
legend.title = element_text(size=16, face="bold"),
axis.title.x =  element_text(size=16, face="bold"),
axis.title.y = element_text(size=16, face="bold"),
axis.text.x =  element_text(size=14, face="bold", angle=60, hjust=1),
axis.text.y = element_text(size=12, face="bold"),
plot.title = element_text(size=22, face="bold"))
set.seed(456)
random_states <- sample(comb_data_pred$abbreviation, size=4)
states_plot <- comb_data_pred %>%
filter(abbreviation %in% random_states,
is.na(Y) == TRUE)
ggplot(states_plot, aes(date, truth)) +
geom_bar(stat="identity", fill="tan") +
geom_ribbon(aes(ymin=Q0.05, ymax=Q0.95),fill="steelblue", alpha = 0.3) +
geom_ribbon(aes(ymin=Q0.25, ymax=Q0.75),fill="steelblue", alpha = 0.5) +
geom_line(data=states_plot,
aes(date, Q0.5)) +
scale_x_date(date_breaks = "1 month", date_labels = "%b-%Y") +
facet_grid(rows = vars(location_name), scales = "free_y") +
theme_classic() +
ylab("Hospitalizations") +
xlab(" ") +
theme_minimal() +
theme(plot.margin = unit(c(2,0.1,2,0.1), "cm"),
panel.grid.minor = element_line(color = "gray90", linewidth = 0.25, linetype = 1),
panel.grid.major = element_line(color = "gray60", linewidth = 0.5, linetype = 1),
panel.background = element_blank(),
plot.background = element_blank(),
strip.text = element_text(size=14, face="bold"),
strip.background = element_blank(),
legend.position="none",
legend.text = element_text(size=12, face="bold"),
legend.title = element_text(size=16, face="bold"),
axis.title.x =  element_text(size=16, face="bold"),
axis.title.y = element_text(size=16, face="bold"),
axis.text.x =  element_text(size=14, face="bold", angle=60, hjust=1),
axis.text.y = element_text(size=12, face="bold"),
plot.title = element_text(size=22, face="bold"))
head(states_plot)
set.seed(456)
random_states <- sample(comb_data_pred$abbreviation, size=4)
states_plot <- comb_data_pred %>%
filter(abbreviation %in% random_states,
is.na(Y) == TRUE)
ggplot(states_plot, aes(date, truth)) +
geom_bar(stat="identity", fill="tan") +
geom_ribbon(aes(ymin=q0.05, ymax=q0.95),fill="steelblue", alpha = 0.3) +
geom_ribbon(aes(ymin=q0.25, ymax=q0.75),fill="steelblue", alpha = 0.5) +
geom_line(data=states_plot,
aes(date, Q0.5)) +
scale_x_date(date_breaks = "1 month", date_labels = "%b-%Y") +
facet_grid(rows = vars(location_name), scales = "free_y") +
theme_classic() +
ylab("Hospitalizations") +
xlab(" ") +
theme_minimal() +
theme(plot.margin = unit(c(2,0.1,2,0.1), "cm"),
panel.grid.minor = element_line(color = "gray90", linewidth = 0.25, linetype = 1),
panel.grid.major = element_line(color = "gray60", linewidth = 0.5, linetype = 1),
panel.background = element_blank(),
plot.background = element_blank(),
strip.text = element_text(size=14, face="bold"),
strip.background = element_blank(),
legend.position="none",
legend.text = element_text(size=12, face="bold"),
legend.title = element_text(size=16, face="bold"),
axis.title.x =  element_text(size=16, face="bold"),
axis.title.y = element_text(size=16, face="bold"),
axis.text.x =  element_text(size=14, face="bold", angle=60, hjust=1),
axis.text.y = element_text(size=12, face="bold"),
plot.title = element_text(size=22, face="bold"))
set.seed(456)
random_states <- sample(comb_data_pred$abbreviation, size=4)
states_plot <- comb_data_pred %>%
filter(abbreviation %in% random_states,
is.na(Y) == TRUE)
ggplot(states_plot, aes(date, truth)) +
geom_bar(stat="identity", fill="tan") +
geom_ribbon(aes(ymin=q0.05, ymax=q0.95),fill="steelblue", alpha = 0.3) +
geom_ribbon(aes(ymin=q0.25, ymax=q0.75),fill="steelblue", alpha = 0.5) +
geom_line(data=states_plot,
aes(date, q0.5)) +
scale_x_date(date_breaks = "1 month", date_labels = "%b-%Y") +
facet_grid(rows = vars(location_name), scales = "free_y") +
theme_classic() +
ylab("Hospitalizations") +
xlab(" ") +
theme_minimal() +
theme(plot.margin = unit(c(2,0.1,2,0.1), "cm"),
panel.grid.minor = element_line(color = "gray90", linewidth = 0.25, linetype = 1),
panel.grid.major = element_line(color = "gray60", linewidth = 0.5, linetype = 1),
panel.background = element_blank(),
plot.background = element_blank(),
strip.text = element_text(size=14, face="bold"),
strip.background = element_blank(),
legend.position="none",
legend.text = element_text(size=12, face="bold"),
legend.title = element_text(size=16, face="bold"),
axis.title.x =  element_text(size=16, face="bold"),
axis.title.y = element_text(size=16, face="bold"),
axis.text.x =  element_text(size=14, face="bold", angle=60, hjust=1),
axis.text.y = element_text(size=12, face="bold"),
plot.title = element_text(size=22, face="bold"))
set.seed(123)
random_states <- sample(comb_data_pred$abbreviation, size=4)
states_plot <- comb_data_pred %>%
filter(abbreviation %in% random_states,
is.na(Y) == TRUE)
ggplot(states_plot, aes(date, truth)) +
geom_bar(stat="identity", fill="tan") +
geom_ribbon(aes(ymin=q0.05, ymax=q0.95),fill="steelblue", alpha = 0.3) +
geom_ribbon(aes(ymin=q0.25, ymax=q0.75),fill="steelblue", alpha = 0.5) +
geom_line(data=states_plot,
aes(date, q0.5)) +
scale_x_date(date_breaks = "1 month", date_labels = "%b-%Y") +
facet_grid(rows = vars(location_name), scales = "free_y") +
theme_classic() +
ylab("Hospitalizations") +
xlab(" ") +
theme_minimal() +
theme(plot.margin = unit(c(2,0.1,2,0.1), "cm"),
panel.grid.minor = element_line(color = "gray90", linewidth = 0.25, linetype = 1),
panel.grid.major = element_line(color = "gray60", linewidth = 0.5, linetype = 1),
panel.background = element_blank(),
plot.background = element_blank(),
strip.text = element_text(size=14, face="bold"),
strip.background = element_blank(),
legend.position="none",
legend.text = element_text(size=12, face="bold"),
legend.title = element_text(size=16, face="bold"),
axis.title.x =  element_text(size=16, face="bold"),
axis.title.y = element_text(size=16, face="bold"),
axis.text.x =  element_text(size=14, face="bold", angle=60, hjust=1),
axis.text.y = element_text(size=12, face="bold"),
plot.title = element_text(size=22, face="bold"))
set.seed(999)
random_states <- sample(comb_data_pred$abbreviation, size=4)
states_plot <- comb_data_pred %>%
filter(abbreviation %in% random_states,
is.na(Y) == TRUE)
ggplot(states_plot, aes(date, truth)) +
geom_bar(stat="identity", fill="tan") +
geom_ribbon(aes(ymin=q0.05, ymax=q0.95),fill="steelblue", alpha = 0.3) +
geom_ribbon(aes(ymin=q0.25, ymax=q0.75),fill="steelblue", alpha = 0.5) +
geom_line(data=states_plot,
aes(date, q0.5)) +
scale_x_date(date_breaks = "1 month", date_labels = "%b-%Y") +
facet_grid(rows = vars(location_name), scales = "free_y") +
theme_classic() +
ylab("Hospitalizations") +
xlab(" ") +
theme_minimal() +
theme(plot.margin = unit(c(2,0.1,2,0.1), "cm"),
panel.grid.minor = element_line(color = "gray90", linewidth = 0.25, linetype = 1),
panel.grid.major = element_line(color = "gray60", linewidth = 0.5, linetype = 1),
panel.background = element_blank(),
plot.background = element_blank(),
strip.text = element_text(size=14, face="bold"),
strip.background = element_blank(),
legend.position="none",
legend.text = element_text(size=12, face="bold"),
legend.title = element_text(size=16, face="bold"),
axis.title.x =  element_text(size=16, face="bold"),
axis.title.y = element_text(size=16, face="bold"),
axis.text.x =  element_text(size=14, face="bold", angle=60, hjust=1),
axis.text.y = element_text(size=12, face="bold"),
plot.title = element_text(size=22, face="bold"))
set.seed(3)
random_states <- sample(comb_data_pred$abbreviation, size=4)
states_plot <- comb_data_pred %>%
filter(abbreviation %in% random_states,
is.na(Y) == TRUE)
ggplot(states_plot, aes(date, truth)) +
geom_bar(stat="identity", fill="tan") +
geom_ribbon(aes(ymin=q0.05, ymax=q0.95),fill="steelblue", alpha = 0.3) +
geom_ribbon(aes(ymin=q0.25, ymax=q0.75),fill="steelblue", alpha = 0.5) +
geom_line(data=states_plot,
aes(date, q0.5)) +
scale_x_date(date_breaks = "1 month", date_labels = "%b-%Y") +
facet_grid(rows = vars(location_name), scales = "free_y") +
theme_classic() +
ylab("Hospitalizations") +
xlab(" ") +
theme_minimal() +
theme(plot.margin = unit(c(2,0.1,2,0.1), "cm"),
panel.grid.minor = element_line(color = "gray90", linewidth = 0.25, linetype = 1),
panel.grid.major = element_line(color = "gray60", linewidth = 0.5, linetype = 1),
panel.background = element_blank(),
plot.background = element_blank(),
strip.text = element_text(size=14, face="bold"),
strip.background = element_blank(),
legend.position="none",
legend.text = element_text(size=12, face="bold"),
legend.title = element_text(size=16, face="bold"),
axis.title.x =  element_text(size=16, face="bold"),
axis.title.y = element_text(size=16, face="bold"),
axis.text.x =  element_text(size=14, face="bold", angle=60, hjust=1),
axis.text.y = element_text(size=12, face="bold"),
plot.title = element_text(size=22, face="bold"))
set.seed(34)
random_states <- sample(comb_data_pred$abbreviation, size=4)
states_plot <- comb_data_pred %>%
filter(abbreviation %in% random_states,
is.na(Y) == TRUE)
ggplot(states_plot, aes(date, truth)) +
geom_bar(stat="identity", fill="tan") +
geom_ribbon(aes(ymin=q0.05, ymax=q0.95),fill="steelblue", alpha = 0.3) +
geom_ribbon(aes(ymin=q0.25, ymax=q0.75),fill="steelblue", alpha = 0.5) +
geom_line(data=states_plot,
aes(date, q0.5)) +
scale_x_date(date_breaks = "1 month", date_labels = "%b-%Y") +
facet_grid(rows = vars(location_name), scales = "free_y") +
theme_classic() +
ylab("Hospitalizations") +
xlab(" ") +
theme_minimal() +
theme(plot.margin = unit(c(2,0.1,2,0.1), "cm"),
panel.grid.minor = element_line(color = "gray90", linewidth = 0.25, linetype = 1),
panel.grid.major = element_line(color = "gray60", linewidth = 0.5, linetype = 1),
panel.background = element_blank(),
plot.background = element_blank(),
strip.text = element_text(size=14, face="bold"),
strip.background = element_blank(),
legend.position="none",
legend.text = element_text(size=12, face="bold"),
legend.title = element_text(size=16, face="bold"),
axis.title.x =  element_text(size=16, face="bold"),
axis.title.y = element_text(size=16, face="bold"),
axis.text.x =  element_text(size=14, face="bold", angle=60, hjust=1),
axis.text.y = element_text(size=12, face="bold"),
plot.title = element_text(size=22, face="bold"))
set.seed(100)#34
random_states <- sample(comb_data_pred$abbreviation, size=4)
states_plot <- comb_data_pred %>%
filter(abbreviation %in% random_states,
is.na(Y) == TRUE)
ggplot(states_plot, aes(date, truth)) +
geom_bar(stat="identity", fill="tan") +
geom_ribbon(aes(ymin=q0.05, ymax=q0.95),fill="steelblue", alpha = 0.3) +
geom_ribbon(aes(ymin=q0.25, ymax=q0.75),fill="steelblue", alpha = 0.5) +
geom_line(data=states_plot,
aes(date, q0.5)) +
scale_x_date(date_breaks = "1 month", date_labels = "%b-%Y") +
facet_grid(rows = vars(location_name), scales = "free_y") +
theme_classic() +
ylab("Hospitalizations") +
xlab(" ") +
theme_minimal() +
theme(plot.margin = unit(c(2,0.1,2,0.1), "cm"),
panel.grid.minor = element_line(color = "gray90", linewidth = 0.25, linetype = 1),
panel.grid.major = element_line(color = "gray60", linewidth = 0.5, linetype = 1),
panel.background = element_blank(),
plot.background = element_blank(),
strip.text = element_text(size=14, face="bold"),
strip.background = element_blank(),
legend.position="none",
legend.text = element_text(size=12, face="bold"),
legend.title = element_text(size=16, face="bold"),
axis.title.x =  element_text(size=16, face="bold"),
axis.title.y = element_text(size=16, face="bold"),
axis.text.x =  element_text(size=14, face="bold", angle=60, hjust=1),
axis.text.y = element_text(size=12, face="bold"),
plot.title = element_text(size=22, face="bold"))
set.seed(1)#34
random_states <- sample(comb_data_pred$abbreviation, size=4)
states_plot <- comb_data_pred %>%
filter(abbreviation %in% random_states,
is.na(Y) == TRUE)
ggplot(states_plot, aes(date, truth)) +
geom_bar(stat="identity", fill="tan") +
geom_ribbon(aes(ymin=q0.05, ymax=q0.95),fill="steelblue", alpha = 0.3) +
geom_ribbon(aes(ymin=q0.25, ymax=q0.75),fill="steelblue", alpha = 0.5) +
geom_line(data=states_plot,
aes(date, q0.5)) +
scale_x_date(date_breaks = "1 month", date_labels = "%b-%Y") +
facet_grid(rows = vars(location_name), scales = "free_y") +
theme_classic() +
ylab("Hospitalizations") +
xlab(" ") +
theme_minimal() +
theme(plot.margin = unit(c(2,0.1,2,0.1), "cm"),
panel.grid.minor = element_line(color = "gray90", linewidth = 0.25, linetype = 1),
panel.grid.major = element_line(color = "gray60", linewidth = 0.5, linetype = 1),
panel.background = element_blank(),
plot.background = element_blank(),
strip.text = element_text(size=14, face="bold"),
strip.background = element_blank(),
legend.position="none",
legend.text = element_text(size=12, face="bold"),
legend.title = element_text(size=16, face="bold"),
axis.title.x =  element_text(size=16, face="bold"),
axis.title.y = element_text(size=16, face="bold"),
axis.text.x =  element_text(size=14, face="bold", angle=60, hjust=1),
axis.text.y = element_text(size=12, face="bold"),
plot.title = element_text(size=22, face="bold"))
set.seed(2)#34
random_states <- sample(comb_data_pred$abbreviation, size=4)
states_plot <- comb_data_pred %>%
filter(abbreviation %in% random_states,
is.na(Y) == TRUE)
ggplot(states_plot, aes(date, truth)) +
geom_bar(stat="identity", fill="tan") +
geom_ribbon(aes(ymin=q0.05, ymax=q0.95),fill="steelblue", alpha = 0.3) +
geom_ribbon(aes(ymin=q0.25, ymax=q0.75),fill="steelblue", alpha = 0.5) +
geom_line(data=states_plot,
aes(date, q0.5)) +
scale_x_date(date_breaks = "1 month", date_labels = "%b-%Y") +
facet_grid(rows = vars(location_name), scales = "free_y") +
theme_classic() +
ylab("Hospitalizations") +
xlab(" ") +
theme_minimal() +
theme(plot.margin = unit(c(2,0.1,2,0.1), "cm"),
panel.grid.minor = element_line(color = "gray90", linewidth = 0.25, linetype = 1),
panel.grid.major = element_line(color = "gray60", linewidth = 0.5, linetype = 1),
panel.background = element_blank(),
plot.background = element_blank(),
strip.text = element_text(size=14, face="bold"),
strip.background = element_blank(),
legend.position="none",
legend.text = element_text(size=12, face="bold"),
legend.title = element_text(size=16, face="bold"),
axis.title.x =  element_text(size=16, face="bold"),
axis.title.y = element_text(size=16, face="bold"),
axis.text.x =  element_text(size=14, face="bold", angle=60, hjust=1),
axis.text.y = element_text(size=12, face="bold"),
plot.title = element_text(size=22, face="bold"))
set.seed(5)#34
random_states <- sample(comb_data_pred$abbreviation, size=4)
states_plot <- comb_data_pred %>%
filter(abbreviation %in% random_states,
is.na(Y) == TRUE)
ggplot(states_plot, aes(date, truth)) +
geom_bar(stat="identity", fill="tan") +
geom_ribbon(aes(ymin=q0.05, ymax=q0.95),fill="steelblue", alpha = 0.3) +
geom_ribbon(aes(ymin=q0.25, ymax=q0.75),fill="steelblue", alpha = 0.5) +
geom_line(data=states_plot,
aes(date, q0.5)) +
scale_x_date(date_breaks = "1 month", date_labels = "%b-%Y") +
facet_grid(rows = vars(location_name), scales = "free_y") +
theme_classic() +
ylab("Hospitalizations") +
xlab(" ") +
theme_minimal() +
theme(plot.margin = unit(c(2,0.1,2,0.1), "cm"),
panel.grid.minor = element_line(color = "gray90", linewidth = 0.25, linetype = 1),
panel.grid.major = element_line(color = "gray60", linewidth = 0.5, linetype = 1),
panel.background = element_blank(),
plot.background = element_blank(),
strip.text = element_text(size=14, face="bold"),
strip.background = element_blank(),
legend.position="none",
legend.text = element_text(size=12, face="bold"),
legend.title = element_text(size=16, face="bold"),
axis.title.x =  element_text(size=16, face="bold"),
axis.title.y = element_text(size=16, face="bold"),
axis.text.x =  element_text(size=14, face="bold", angle=60, hjust=1),
axis.text.y = element_text(size=12, face="bold"),
plot.title = element_text(size=22, face="bold"))
set.seed(34)
random_states <- sample(comb_data_pred$abbreviation, size=4)
states_plot <- comb_data_pred %>%
filter(abbreviation %in% random_states,
is.na(Y) == TRUE)
ggplot(states_plot, aes(date, truth)) +
geom_bar(stat="identity", fill="tan") +
geom_ribbon(aes(ymin=q0.05, ymax=q0.95),fill="steelblue", alpha = 0.3) +
geom_ribbon(aes(ymin=q0.25, ymax=q0.75),fill="steelblue", alpha = 0.5) +
geom_line(data=states_plot,
aes(date, q0.5)) +
scale_x_date(date_breaks = "1 month", date_labels = "%b-%Y") +
facet_grid(rows = vars(location_name), scales = "free_y") +
theme_classic() +
ylab("Hospitalizations") +
xlab(" ") +
theme_minimal() +
theme(plot.margin = unit(c(2,0.1,2,0.1), "cm"),
panel.grid.minor = element_line(color = "gray90", linewidth = 0.25, linetype = 1),
panel.grid.major = element_line(color = "gray60", linewidth = 0.5, linetype = 1),
panel.background = element_blank(),
plot.background = element_blank(),
strip.text = element_text(size=14, face="bold"),
strip.background = element_blank(),
legend.position="none",
legend.text = element_text(size=12, face="bold"),
legend.title = element_text(size=16, face="bold"),
axis.title.x =  element_text(size=16, face="bold"),
axis.title.y = element_text(size=16, face="bold"),
axis.text.x =  element_text(size=14, face="bold", angle=60, hjust=1),
axis.text.y = element_text(size=12, face="bold"),
plot.title = element_text(size=22, face="bold"))
set.seed(34)
random_states <- sample(comb_data_pred$abbreviation, size=4)
states_plot <- comb_data_pred %>%
filter(abbreviation %in% random_states,
is.na(Y) == TRUE)
ggplot(states_plot, aes(date, truth)) +
geom_bar(stat="identity", fill="tan") +
geom_ribbon(aes(ymin=q0.05, ymax=q0.95),fill="steelblue", alpha = 0.3) +
geom_ribbon(aes(ymin=q0.25, ymax=q0.75),fill="steelblue", alpha = 0.5) +
geom_line(data=states_plot,
aes(date, q0.5)) +
scale_x_date(date_breaks = "1 month", date_labels = "%b-%Y") +
facet_grid(rows = vars(location_name), scales = "free_y") +
theme_classic() +
ylab("Hospitalizations") +
xlab(" ") +
theme_minimal() +
theme(panel.grid.minor = element_line(color = "gray90", linewidth = 0.25, linetype = 1),
panel.grid.major = element_line(color = "gray60", linewidth = 0.5, linetype = 1),
panel.background = element_blank(),
plot.background = element_blank(),
strip.text = element_text(size=14, face="bold"),
strip.background = element_blank(),
legend.position="none",
legend.text = element_text(size=12, face="bold"),
legend.title = element_text(size=16, face="bold"),
axis.title.x =  element_text(size=16, face="bold"),
axis.title.y = element_text(size=16, face="bold"),
axis.text.x =  element_text(size=14, face="bold", angle=60, hjust=1),
axis.text.y = element_text(size=12, face="bold"),
plot.title = element_text(size=22, face="bold"))
# Chunk 1
#wrangling
library(tidyverse)
library(lubridate)
#inference
library(INLA)
#use adaptive search algorithm
inla.setOption(inla.mode= "experimental")
options(dplyr.summarise.inform = FALSE)
# Chunk 2
#function to downlaod file
get_data <- function(url) {
df <- read_csv(url)
return(df)
}
flusion_url <- "https://github.com/JMHumphreys/flusion/raw/main/flusion/flusion_v1.csv"
flusion <- get_data(flusion_url)
head(flusion)
# Chunk 3
#FluSight: 2023-06-12
flusight_url <- "https://github.com/cdcepi/Flusight-forecast-data/raw/master/data-truth/truth-Incident%20Hospitalizations.csv"
flusight_truth <- get_data(flusight_url)
head(flusight_truth)
# Chunk 4
range(flusion$date)
range(flusight_truth$date) #1 week added since flusion.v1
flusight_truth <- flusight_truth %>%
mutate(truth = value) %>%
select(date, location, truth)
comb_data <- left_join(flusion, flusight_truth, by = c("date", "location"))
comb_data <- comb_data %>%
mutate(ts_weeks = as.integer(as.factor(year + epiweek/52)))
head(comb_data)
tail(comb_data)
dim(flusion)
which(is.na(flusion))
which(is.na(flusight_truth))
head(flusight_truth)
xx = flusight_truth %>% group_by(location) %>% summarise(cnt = length(truth))
xx
range(xx$cnt)
#FluSight: 2023-06-12
flusight_url <- "https://github.com/cdcepi/Flusight-forecast-data/raw/master/data-truth/truth-Incident%20Hospitalizations.csv"
flusight_truth <- get_data(flusight_url)
head(flusight_truth)
xx = flusight_truth %>% group_by(location) %>% summarise(cnt = length(truth))
xx = flusight_truth %>% group_by(location) %>% summarise(cnt = length(value))
range(xx$cnt)
xx = flusight_truth %>% group_by(location) %>% summarise(cnt = unique(length(date)))
range(xx$cnt)
xx = flusight_truth %>% group_by(location) %>% summarise(cnt = unique(length(date)))
range(xx$cnt)
